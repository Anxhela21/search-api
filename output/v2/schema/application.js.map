{"version":3,"sources":["../../../src/v2/schema/application.js"],"names":["typeDef","resolver","Query","globalAppData","applications","parent","name","namespace","appModel","resolveApplications","Application","_uid","created","dashboard","selfLink","clusterCount","args","resolveAppClustersCount","hubSubscriptions","resolveAppHubSubscriptions","podStatusCount","resolveAppPodsCount","remoteSubscriptionStatusCount","resolveAppRemoteSubscriptions","GlobalAppData","channelsCount","resolveGlobalAppChannelsCount","resolveGlobalAppClusterCount","hubSubscriptionCount","resolveGlobalAppHubSubscriptionsCount","resolveGlobalAppRemoteSubscriptions","Subscription","status","channel"],"mappings":";;;;;AAAA;;;;;;;;;AASO,MAAMA,4BAAW;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAAjB;;AAmDA,MAAMC,8BAAW;AACtBC,SAAO;AACLC,mBAAe,OAAO,EAAP,CADV;AAELC,kBAAc,CAACC,MAAD,EAAS,EAAEC,IAAF,EAAQC,SAAR,EAAT,EAA8B,EAAEC,QAAF,EAA9B,KAA+CA,SAASC,mBAAT,CAA6B,EAAEH,IAAF,EAAQC,SAAR,EAA7B;AAFxD,GADe;AAKtBG,eAAa;AACXC,UAAMN,UAAUA,OAAO,UAAP,CADL;AAEXO,aAASP,UAAUA,OAAO,aAAP,CAFR;AAGXQ,eAAWR,UAAUA,OAAO,eAAP,CAHV;AAIXC,UAAMD,UAAUA,OAAO,UAAP,CAJL;AAKXE,eAAWF,UAAUA,OAAO,eAAP,CALV;AAMXS,cAAUT,UAAUA,OAAO,cAAP,CANT;AAOXU,kBAAc,CAACV,MAAD,EAASW,IAAT,EAAe,EAAER,QAAF,EAAf,KAAgCA,SAASS,uBAAT,CAAiCZ,OAAO,UAAP,CAAjC,CAPnC;AAQXa,sBAAkB,CAACb,MAAD,EAASW,IAAT,EAAe,EAAER,QAAF,EAAf,KAAgCA,SAASW,0BAAT,CAAoCd,OAAO,UAAP,CAApC,CARvC;AASXe,oBAAgB,CAACf,MAAD,EAASW,IAAT,EAAe,EAAER,QAAF,EAAf,KAAgCA,SAASa,mBAAT,CAA6BhB,OAAO,UAAP,CAA7B,CATrC;AAUXiB,mCAA+B,CAACjB,MAAD,EAASW,IAAT,EAAe,EAAER,QAAF,EAAf,KAC7BA,SAASe,6BAAT,CAAuClB,OAAO,UAAP,CAAvC;AAXS,GALS;AAkBtBmB,iBAAe;AACbC,mBAAe,CAACpB,MAAD,EAASW,IAAT,EAAe,EAAER,QAAF,EAAf,KAAgCA,SAASkB,6BAAT,EADlC;AAEbX,kBAAc,CAACV,MAAD,EAASW,IAAT,EAAe,EAAER,QAAF,EAAf,KAAgCA,SAASmB,4BAAT,EAFjC;AAGbC,0BAAsB,CAACvB,MAAD,EAASW,IAAT,EAAe,EAAER,QAAF,EAAf,KAAgCA,SAASqB,qCAAT,EAHzC;AAIbP,mCAA+B,CAACjB,MAAD,EAASW,IAAT,EAAe,EAAER,QAAF,EAAf,KAAgCA,SAASsB,mCAAT;AAJlD,GAlBO;AAwBtBC,gBAAc;AACZpB,UAAMN,UAAUA,OAAO,UAAP,CADJ;AAEZ2B,YAAQ3B,UAAUA,OAAO,YAAP,CAFN;AAGZ4B,aAAS5B,UAAUA,OAAO,aAAP;AAHP;AAxBQ,CAAjB","file":"application.js","sourcesContent":["/** *****************************************************************************\n * Licensed Materials - Property of IBM\n * (c) Copyright IBM Corporation 2019. All Rights Reserved.\n *\n * Note to U.S. Government Users Restricted Rights:\n * Use, duplication or disclosure restricted by GSA ADP Schedule\n * Contract with IBM Corp.\n ****************************************************************************** */\n\nexport const typeDef = `\n  type Application {\n    _uid: String\n    created: String\n\n    # Grafana dashboard for this application.\n    dashboard: String\n\n    name: String\n    namespace: String\n    selfLink: String\n\n    # Number of clusters where this application has created any resources.\n    clusterCount: Int\n\n    # Hub subscriptions associated with this application.\n    # Hub subscriptions are those without '_hostingSubscription' AND with _hubClusterResource=true\n    hubSubscriptions: [Subscription]\n\n    # Pods associated with this app, grouped by pod status, in this format { Running: 2, ImageLoopBackOff: 10 }.\n    podStatusCount: JSON\n\n    # Remote subscriptions for this app, grouped by status, in this format { Failed:2, Subscribed: 2, null: 3 }.\n    # Remote subscriptions are those with the '_hostingSubscription' property.\n    remoteSubscriptionStatusCount: JSON\n  }\n\n  type Subscription {\n    _uid: String\n    status: String\n    channel: String\n  }\n\n  # Aggregated data from all applications.\n  type GlobalAppData {\n    # All chanels being referenced by any application.\n    channelsCount: Int\n\n    # Number of clusters where any application has created resources.\n    clusterCount: Int\n\n    # Subscriptions in the hub associated with any application.\n    # Subscriptions without '_hostingSubscription' AND with _hubClusterResource=true\n    hubSubscriptionCount: Int\n\n    # Remote Subscriptions grouped by status, in this format { Failed:2, Subscribed: 2, null: 3 }.\n    # Remote subscriptions are those with the '_hostingSubscription' property.\n    remoteSubscriptionStatusCount: JSON\n  }\n`;\n\nexport const resolver = {\n  Query: {\n    globalAppData: () => ({}),\n    applications: (parent, { name, namespace }, { appModel }) => appModel.resolveApplications({ name, namespace }),\n  },\n  Application: {\n    _uid: parent => parent['app._uid'],\n    created: parent => parent['app.created'],\n    dashboard: parent => parent['app.dashboard'],\n    name: parent => parent['app.name'],\n    namespace: parent => parent['app.namespace'],\n    selfLink: parent => parent['app.selfLink'],\n    clusterCount: (parent, args, { appModel }) => appModel.resolveAppClustersCount(parent['app._uid']),\n    hubSubscriptions: (parent, args, { appModel }) => appModel.resolveAppHubSubscriptions(parent['app._uid']),\n    podStatusCount: (parent, args, { appModel }) => appModel.resolveAppPodsCount(parent['app._uid']),\n    remoteSubscriptionStatusCount: (parent, args, { appModel }) =>\n      appModel.resolveAppRemoteSubscriptions(parent['app._uid']),\n  },\n  GlobalAppData: {\n    channelsCount: (parent, args, { appModel }) => appModel.resolveGlobalAppChannelsCount(),\n    clusterCount: (parent, args, { appModel }) => appModel.resolveGlobalAppClusterCount(),\n    hubSubscriptionCount: (parent, args, { appModel }) => appModel.resolveGlobalAppHubSubscriptionsCount(),\n    remoteSubscriptionStatusCount: (parent, args, { appModel }) => appModel.resolveGlobalAppRemoteSubscriptions(),\n  },\n  Subscription: {\n    _uid: parent => parent['sub._uid'],\n    status: parent => parent['sub.status'],\n    channel: parent => parent['sub.channel'],\n  },\n};\n"]}