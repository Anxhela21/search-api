{"version":3,"sources":["../../../src/v2/lib/auth-middleware.test.js"],"names":["describe","test","done","mockRequest","headers","authorization","authMiddleware","shouldLocalAuth","err","expect","not","toBeDefined","kubeToken","toBe"],"mappings":";;AASA;;;;;;AAEAA,SAAS,iBAAT,EAA4B,MAAM;AAChCC,OAAK,kDAAL,EAA0DC,IAAD,IAAU;AACjE,UAAMC,cAAc,EAAEC,SAAS,EAAEC,eAAe,iBAAjB,EAAX,EAApB;AACA,UAAMC,iBAAiB,8BAAqB,EAAEC,iBAAiB,IAAnB,EAArB,CAAvB;;AAEAD,mBAAeH,WAAf,EAA4B,IAA5B,EAAmCK,GAAD,IAAS;AACzCC,aAAOD,GAAP,EAAYE,GAAZ,CAAgBC,WAAhB;AACAF,aAAON,YAAYS,SAAnB,EAA8BC,IAA9B,CAAmC,UAAnC;AACAX;AACD,KAJD;AAKD,GATD;AAUD,CAXD,E,CAXA","file":"auth-middleware.test.js","sourcesContent":["/** *****************************************************************************\n * Licensed Materials - Property of IBM\n * (c) Copyright IBM Corporation 2019. All Rights Reserved.\n *\n * Note to U.S. Government Users Restricted Rights:\n * Use, duplication or disclosure restricted by GSA ADP Schedule\n * Contract with IBM Corp.\n ****************************************************************************** */\n\nimport createAuthMiddleWare from './auth-middleware';\n\ndescribe('Auth Middleware', () => {\n  test('Sets kubeToken to Bearer localdev in development', (done) => {\n    const mockRequest = { headers: { authorization: 'Bearer localdev' } };\n    const authMiddleware = createAuthMiddleWare({ shouldLocalAuth: true });\n\n    authMiddleware(mockRequest, null, (err) => {\n      expect(err).not.toBeDefined();\n      expect(mockRequest.kubeToken).toBe('localdev');\n      done();\n    });\n  });\n});\n"]}